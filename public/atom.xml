<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Z . A . Y . F . E . N</title>
  
  <subtitle>CODING...</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zayfen.com/"/>
  <updated>2019-11-29T07:09:06.887Z</updated>
  <id>https://zayfen.com/</id>
  
  <author>
    <name>zayfen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>HTTP缓存（转载自developer.google.com）</title>
    <link href="https://zayfen.com/2019/11/28/743319a28402c588d40d5708a261f586/"/>
    <id>https://zayfen.com/2019/11/28/743319a28402c588d40d5708a261f586/</id>
    <published>2019-11-29T06:59:33.773Z</published>
    <updated>2019-11-29T07:09:06.887Z</updated>
    
    <content type="html"><![CDATA[<p><span class="colour" style="color: rgb(33, 33, 33);">通过网络获取内容既速度缓慢又开销巨大。较大的响应需要在客户端与服务器之间进行多次往返通信，这会延迟浏览器获得和处理内容的时间，还会增加访问者的流量费用。因此，缓存并重复利用之前获取的资源的能力成为性能优化的一个关键方面。</span><br><span class="colour" style="color: rgb(33, 33, 33);">好在每个浏览器都自带了 HTTP 缓存实现功能。您只需要确保每个服务器响应都提供正确的 HTTP 标头指令，以指示浏览器何时可以缓存响应以及可以缓存多久。</span><br><span class="colour" style="color: rgb(33, 33, 33);">注：如果您在应用中使用 Webview 来获取和显示网页内容，可能需要提供额外的配置标志，以确保 HTTP 缓存得到启用、其大小根据用例进行了合理设置并且缓存将持久保存。务必查看平台文档并确认您的设置！</span><br><span class="colour" style="color: rgb(33, 33, 33);"><img src="data:image/png;base64,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" alt></span><br><span class="colour" style="color: rgb(33, 33, 33);">当服务器返回响应时，还会发出一组 HTTP 标头，用于描述响应的内容类型、长度、缓存指令、验证令牌等。例如，在上图的交互中，服务器返回一个 1024 字节的响应，指示客户端将其缓存最多 120 秒，并提供一个验证令牌（“x234dff”），可在响应过期后用来检查资源是否被修改。</span></p><a id="more"></a><h2 id="通过-ETag-验证缓存的响应"><a href="#通过-ETag-验证缓存的响应" class="headerlink" title="通过 ETag 验证缓存的响应"></a><span class="colour" style="color: rgb(33, 33, 33);">通过 ETag 验证缓存的响应</span></h2><h3 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a><span class="colour" style="color: rgb(33, 33, 33);">TL;DR</span></h3><ul><li><span class="colour" style="color: rgb(33, 33, 33);">服务器使用 ETag HTTP 标头传递验证令牌。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">验证令牌可实现高效的资源更新检查：资源未发生变化时不会传送任何数据。</span></li></ul><p><span class="colour" style="color: rgb(33, 33, 33);">假定在首次获取资源 120 秒后，浏览器又对该资源发起了新的请求。首先，浏览器会检查本地缓存并找到之前的响应。遗憾的是，该响应现已过期，浏览器无法使用。此时，浏览器可以直接发出新的请求并获取新的完整响应。不过，这样做效率较低，因为如果资源未发生变化，那么下载与缓存中已有的完全相同的信息就毫无道理可言！</span><br><span class="colour" style="color: rgb(33, 33, 33);">这正是验证令牌（在 ETag 标头中指定）旨在解决的问题。服务器生成并返回的随机令牌通常是文件内容的哈希值或某个其他指纹。客户端不需要了解指纹是如何生成的，只需在下一次请求时将其发送至服务器。如果指纹仍然相同，则表示资源未发生变化，您就可以跳过下载。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><img src="data:image/png;base64,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" alt></span><br><span class="colour" style="color: rgb(33, 33, 33);">在上例中，客户端自动在“If-None-Match” HTTP 请求标头内提供 ETag 令牌。服务器根据当前资源核对令牌。如果它未发生变化，服务器将返回“304 Not Modified”响应，告知浏览器缓存中的响应未发生变化，可以再延用 120 秒。请注意，您不必再次下载响应，这节约了时间和带宽。</span><br><span class="colour" style="color: rgb(33, 33, 33);">作为网络开发者，您如何利用高效的重新验证？浏览器会替我们完成所有工作：它会自动检测之前是否指定了验证令牌，它会将验证令牌追加到发出的请求上，并且它会根据从服务器接收的响应在必要时更新缓存时间戳。</span><span class="colour" style="color: rgb(33, 33, 33);"><strong>我们唯一要做的就是确保服务器提供必要的 ETag 令牌。检查您的服务器文档中有无必要的配置标志。</strong></span><br><span class="colour" style="color: rgb(33, 33, 33);">注：提示：HTML5 Boilerplate 项目包含所有最流行服务器的</span><a href="https://github.com/h5bp/server-configs" target="_blank" rel="noopener">配置文件样例</a><span class="colour" style="color: rgb(33, 33, 33);">，其中为每个配置标志和设置都提供了详细的注解。在列表中找到您喜爱的服务器，查找合适的设置，然后复制/确认您的服务器配置了推荐的设置。</span></p><h2 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a><span class="colour" style="color: rgb(33, 33, 33);">Cache-Control</span></h2><h3 id="TL-DR-1"><a href="#TL-DR-1" class="headerlink" title="TL;DR"></a><span class="colour" style="color: rgb(33, 33, 33);">TL;DR</span></h3><ul><li><span class="colour" style="color: rgb(33, 33, 33);">每个资源都可通过 Cache-Control HTTP 标头定义其缓存策略</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">Cache-Control 指令控制谁在什么条件下可以缓存响应以及可以缓存多久。</span></li></ul><p><span class="colour" style="color: rgb(33, 33, 33);">从性能优化的角度来说，最佳请求是无需与服务器通信的请求：您可以通过响应的本地副本消除所有网络延迟，以及避免数据传送的流量费用。为实现此目的，HTTP 规范允许服务器返回</span><span class="colour" style="color: rgb(33, 33, 33);"> </span><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9" target="_blank" rel="noopener">Cache-Control 指令</a><span class="colour" style="color: rgb(33, 33, 33);">，这些指令控制浏览器和其他中间缓存如何缓存各个响应以及缓存多久。</span><br><span class="colour" style="color: rgb(33, 33, 33);">注：Cache-Control 标头是在 HTTP/1.1 规范中定义的，取代了之前用来定义响应缓存策略的标头（例如 Expires）。所有现代浏览器都支持 Cache-Control，因此，使用它就够了。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWQAAAEDCAMAAAA1NI7wAAAC+lBMVEVMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKCwo0OT1HTlRbY2tocXoxNTkGBgcAAAAAAAAAAAAAAACXpbHJ2+vP4vPF1+iFkZwlKSsAAAAAAAAAAACerbrN3+91gIkAAAAAAAABAgI3PEEQExEBAQE6QEWwwM8TFRUAAAAWGBq/0OACAwMAAAAAAACPnKheZ28NDw/C1OQNDg2Kl6JjbHQBAQGot8UAAAAsMDROVVu4ydi1xtUaHB5SWmB4g42ks8Cru8mCjpibqbZveoNLUlgiJSN8iJKSoKw/RElESlAeIB9YYGfFtsO7jZe2eoO0cXrCqrfJx9axY2uYAACZGRutVly8ztykMDOaCAjJ2ueoQ0i9maTM1OSPtZmoxrtDfix2o3U4dh2Dq4caAAA7QDphaV9tdWpcY1kYGhcuMSy+zbnZ6tOms6HE076Ik4RMUkpckFCZvKZvnmqlxLedqZg1OTRGS0R1fnLP38mpx708eSTB2N9TWVBBRj/I3el8hXhQhz+XpJOvvarS48ypt6XW5tCFj4G6ybVocGUbHRqjr562xLFZX1aSno6Bi36PmotQdEsYMw2grZzK2sSzzcqMlogAAAAAAAABAgIAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAeAAAzAAAAAACZAABARwA4dxw5dh45eBw4dh44dh04dh03dh4AAAAAAAAAAAAAAAAAAAA3dxw4dhwAAAAAAAAAAAAAAAAAAAACAgIAAAD85c0nTBInThQoThMnTREgQCAnThMmTQ0oTRIlThQoTBQlUBUnTRMnThMrVRUoUBQmThMmTxMnThMmTxMoUBAnTRMnThInThMnThMmThMnThIoTxInTRMqThUmTxImThMgUBAnThInThMmThImThMnThQnThMnTRInTRQnTxMnThSZAACYAACYAACYAACYAACZAACUAACZAACYAACYAACZAAAWMAs0AADsiS4CAAAA/XRSTlMAGEBXb39fSRQce8//y2kI+P/////////oUyTX////////mQQs////vAzs//+3////hv////w0///K/////5P/Q////////////////////////////////////////////v////////////////////////////////////////////////////////////////////////////////91x6RP89vQKDA4EOONn79bfwS+QySbe+zPINPf779jfzyfqGPDsLP/KVtfOgjfFFNLGTBP/wxAtGv6nyC/b+ny2alHdSRXxxDNin+Vw+Nkm9M0aL9TnjQK6x7Pszyfo+5fRQAAF7tJREFUeAHs1oV1RFEIBFDWbdbd+O5xd++/pqSMNzncDnDkPzDGGGOMMcaYWr3RbHFotjtd4dPrD8BlOBoLlXF/Akxn88WSw2K+WgObrRDZ7YH54ahMPD8AwkhYxBsEidJJszXygmUdl6g8ZZSc4JSjl6McZ6lyOr/ApTAY4epaWSU3t3cMj0WJe+X1gEdxXxuBEnt6BkErP+JFmb3izf1tMcGTMnvHRlz3gU/l9oye+yv5S7lV6Ijj+nhVbl9oi+NaWCq3BZrkSSawRIssyd8/f7xf9utiy20dAOP4C2gT3tifk3tbZzHgUMnRnDn2yCF7whyFU+77r+ujKQ+DivqZvfwbBZlUZI+EShUTEqnIccZYulSFRCqyOEq6sGt2+hioN6gN3bcBVgNQY7DSaQYg3NIioPs6reH2VGQjF8AvOMQxT1PJZlkz91tAjBShR7RWJBpNVYFEas+JtMFIhxRwOypyxnW7uY4Jn8RRbKXqQKVsnHaBXIRCi+i9KpB1oJUeA0HZYMQ1bdyaiuw6KQqfWMDeKQCbUFo2j/fdCvoxOA61AVQyjDGLPGPExzcGw+FwNBZGw8kUl1Pv5HjK8Inx+ajQMFK1INZowkvDShKSpIgSocEIwzdm/DvzxQCXUJE1UvcJACcOwCylcZg4bC1Ju2QAKNK9ktXpQvgh8nCxWMzGwmyxWoedFxtcSEV2U4aIHPdMgBILrUyEoZnZg+FpACN+UC4CNa8mIl/GHCw4n+FHKrIXjUZ7pAUR+SSXbCUiz4ET4gFx0gJiuWxjr6kbzWar6kUhIl9hsOYTfE9FziZCQR1g4nTxaK9LxXkKHCeWgB509o6KgBEcdgIddsLGlUZ8C0FFlmez5lNIpSIDCz6ETCryeDxe8e14vFOR5dnyMyMVWZ4JPzNRkSVacWGjIku0E41XUJElMuc8NFORIdOIh4YqMmR6uQ4jT1VkSDXjfA0V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" alt></span></p><h3 id="“no-cache”和“no-store”"><a href="#“no-cache”和“no-store”" class="headerlink" title="“no-cache”和“no-store”"></a><span class="colour" style="color: rgb(33, 33, 33);">“no-cache”和“no-store”</span></h3><p><span class="colour" style="color: rgb(33, 33, 33);">“no-cache”表示必须先与服务器确认返回的响应是否发生了变化，然后才能使用该响应来满足后续对同一网址的请求。因此，如果存在合适的验证令牌 (ETag)，no-cache 会发起往返通信来验证缓存的响应，但如果资源未发生变化，则可避免下载。</span><br><span class="colour" style="color: rgb(33, 33, 33);">相比之下，“no-store”则要简单得多。它直接禁止浏览器以及所有中间缓存存储任何版本的返回响应，例如，包含个人隐私数据或银行业务数据的响应。每次用户请求该资产时，都会向服务器发送请求，并下载完整的响应。</span></p><h3 id="“public”与“private”"><a href="#“public”与“private”" class="headerlink" title="“public”与“private”"></a><span class="colour" style="color: rgb(33, 33, 33);">“public”与“private”</span></h3><p><span class="colour" style="color: rgb(33, 33, 33);">如果响应被标记为“public”，则即使它有关联的 HTTP 身份验证，甚至响应状态代码通常无法缓存，也可以缓存响应。大多数情况下，“public”不是必需的，因为明确的缓存信息（例如“max-age”）已表示响应是可以缓存的。</span><br><span class="colour" style="color: rgb(33, 33, 33);">相比之下，浏览器可以缓存“private”响应。不过，这些响应通常只为单个用户缓存，因此不允许任何中间缓存对其进行缓存。例如，用户的浏览器可以缓存包含用户私人信息的 HTML 网页，但 CDN 却不能缓存。</span></p><h3 id="“max-age”"><a href="#“max-age”" class="headerlink" title="“max-age”"></a><span class="colour" style="color: rgb(33, 33, 33);">“max-age”</span></h3><p><span class="colour" style="color: rgb(33, 33, 33);">指令指定从请求的时间开始，允许获取的响应被重用的最长时间（单位：秒）。例如，“max-age=60”表示可在接下来的 60 秒缓存和重用响应。</span></p><h2 id="定义最佳-Cache-Control-策略"><a href="#定义最佳-Cache-Control-策略" class="headerlink" title="定义最佳 Cache-Control 策略"></a><span class="colour" style="color: rgb(33, 33, 33);">定义最佳 Cache-Control 策略</span></h2><p><span class="colour" style="color: rgb(33, 33, 33);"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlMAAAJYCAMAAABxWJMZAAAC/VBMVEVMaXEKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQgIyZLUlhbY2tocXpOVVsxNTkKCgoAAAAAAAAAAAA6QEWot8XP4vPJ2+t4g40AAABlbnavv80MDQxESlADBAOywtE0OT0AAABhanKPnKhueYKZp7OCjpiMmKRYYGcGBwcaHB5RWV9yfIWSoKy1xtVrdX43PEEdICKerbrF1+i8zdyltMF/ipXC1OSFkZyisL6IlaDM3u+ru8l1gIlBR0xHTlSbqbY+Q0gXGRsTFRYNDg8nKy4QERItMjUkJyq4ydh7h5EqLjJUXGO/0OBeZ2+Vo68AAAAAAAAAAAAAAQAAAACZAACYAACYAACYAACWAAAAAAA4dRw4dx04dRs3dh04dx2YAACZAAAAAAA4dh04dh05dx44dh04dh1AeBqYAAAAAAAqKiYdHRwAAAA4dR04dh03dh2YAACfAAAAAAAAAAAAAAAAAAA4dh04dhw3dx6YAACYAACYAAAAAAAAAAAAAAAAAAA4dhxAgCA3dh00dBw5eBw4dxxAgACYAACYAAAAAAAAAAA4dRw4dh2XAACcAACZAACXAAAAAAAAAACYAAAAAAAAAAAAAAAAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAnJiBcV0pvaVmAeWZgW01STkFCQTc4NS08OTBFRj3PxKb/8sz36saSi3V6dGLXzKzb0K9APTPz58K6sJQyLyggHhqtpIuGf2vDuZzf1LKMhXDv47/77skTEg+gmICbk3wsKiMYFxNYVEYPDw3n27nr37xmYVEaGxinnoXj17a/tZl0bl3Jv6C0q5AiIx7TyKkAAAAAAABMSD0UFBMhJCQAAAAICAYAAABfZ1xtdWpJT0g2OzUqLSmgrZzZ6tPH1sFjamDW5tCksJ9mbmO3xbIxNTB9hnmwvqvQ4cpSWE+/zrrL28aIk4SSno6bp5e0wq9aYVeDjYBqcmd1fnKruKa6ybVweW1OVEynozBVAAAA33RSTlMABDFbb39fSxQYlvT/xE9H+P////////+fDPz//////yD//6j/////eP////////////////////////////////////////////////////////////9zVjjPqF+fHz8WtIyfM2xA/6nX/8sp+t8NS9P297/BXU/fCAiD8Ofoqx6DzPj47LdBfQjxFSS5BCjs36/WmDYObrlnKaMQh2PHjY88u2vjo////////////////////////////////////////////////////////////////4vb//nzjcnSEPwE0gAANhVJREFUeAHs0oVxA0EQALA105oZ3g5T/wWmh+DdjFSDAgAAAAAAAAAAAAAAAAAAAOA7aLU73V4tuv3BMCjbaDzJykxnQcHmi8zlar2pxXq722cejkGpBqc8X5q6XG/7PASFulvkfVOfh33Ookw85lNTo1tOo0gcT88vTY2u+xxGiZjla1OnXQ6iRLzle1OnbfajRPRy09Rpnd3AqZ+0yV7glFNOOYVTOOWUU07hFE455ZRTOMV/nPr4ZOc+1hM21jiM++xOki8FPAMLeOUHHoTcwMhGVJsy9F4MTrn/CwmS0nsvZN6l5r/80YsKu7vnF3VbIq50yx9eOek9ZK2pf78pXfFO+VLgl6Q94jzNH92N+/iUcqvW1L/flE9YTu7/ZlOBWwPqDWvqXEwFUgOaSlWBbAloldrwXFMvHaBTUqrrhKaKd7Xel6ayd6pviCsX+7UB5lbVngGaNVVyoNks1lQToPOinorhLpuNr5iuUpHj9lBddaA3CoChnIspa6ovZbh0R+P02KAkUjah5E71bNahOE/oqeuBni0KGbmLTQ2lnpynWkT5mcriyvEW46mr4M4tJOcJB71cPY7DC/mZr9duGfz1YrSUIXjzZMG9hOZiozfzPFEmtf73m7KmFuqUrqQMt3IPg0rpa1ObS2j7ZZINAy+yRYcT5Qahqay7g/b8hih/sTWOWuRDnllmNU4QJ/F+5+ZZ7lvwWtmGO6hveJYsXCWMmY0Mpr4krDVND6ypf78p1/dXsn9xYLwHyEy/NpWaddsAzgFaOwnQ4aQlw9BUbmGAywZR/hjYJAFOzJaJbgdAbwCTftpKFzjIEL8AKJ+iFCYO0JQeUJUAoD4/k9d99rHPXLp9wJOoxtem8nuR/dBgnryZrEJTGsBXoSktcUT5N4DEaXoJkdTOoJPR2eNEJpE2ha9jU+xWkh41KUncJPI1wZo6D1OQcXvg1YOwbWyqKBOguMvIkWS69radhKYKAKvYlB9EAbEzSD8EYQcg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" alt></span><br><span class="colour" style="color: rgb(33, 33, 33);">按照以上决策树为您的应用使用的特定资源或一组资源确定最佳缓存策略。在理想的情况下，您的目标应该是在客户端上缓存尽可能多的响应，缓存尽可能长的时间，并且为每个响应提供验证令牌，以实现高效的重新验证。</span></p><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Cache-Control 指令和说明</td></tr><tr><td><span class="colour" style="color: rgb(33, 33, 33);">max-age=86400</span></td><td><span class="colour" style="color: rgb(33, 33, 33);">浏览器以及任何中间缓存均可将响应（如果是“public”响应）缓存长达 1 天（60 秒 x 60 分钟 x 24 小时）。</span></td></tr><tr><td><span class="colour" style="color: rgb(33, 33, 33);">private, max-age=600</span></td><td><span class="colour" style="color: rgb(33, 33, 33);">客户端的浏览器只能将响应缓存最长 10 分钟（60 秒 x 10 分钟）。</span></td></tr><tr><td><span class="colour" style="color: rgb(33, 33, 33);">no-store</span></td><td><span class="colour" style="color: rgb(33, 33, 33);">不允许缓存响应，每次请求都必须完整获取。</span></td></tr></tbody></table></div><p><span class="colour" style="color: rgb(33, 33, 33);">根据 HTTP Archive，在排名最高的 300,000 个网站（按照 Alexa 排名）中，</span><a href="http://httparchive.org/trends.php#maxage0" target="_blank" rel="noopener">所有下载的响应中几乎有半数</a><span class="colour" style="color: rgb(33, 33, 33);">可由浏览器缓存，这可以大量减少重复的网页浏览和访问。当然，这并不意味着您的特定应用有 50% 的资源可以缓存。一些网站的资源 90% 以上都可以缓存，而其他网站可能有许多私密或时效要求高的数据根本无法缓存。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><strong>请审核您的网页，确定哪些资源可以缓存，并确保它们返回正确的 Cache-Control 和 ETag 标头。</strong></span></p><h2 id="废弃和更新缓存的响应"><a href="#废弃和更新缓存的响应" class="headerlink" title="废弃和更新缓存的响应"></a><span class="colour" style="color: rgb(33, 33, 33);">废弃和更新缓存的响应</span></h2><h3 id="TL-DR-2"><a href="#TL-DR-2" class="headerlink" title="TL;DR"></a><span class="colour" style="color: rgb(33, 33, 33);">TL;DR</span></h3><ul><li><span class="colour" style="color: rgb(33, 33, 33);">在资源“过期”之前，将一直使用本地缓存的响应。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">您可以通过在网址中嵌入文件内容指纹，强制客户端更新到新版本的响应。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">为获得最佳性能，每个应用都需要定义自己的缓存层次结构。</span></li></ul><p><span class="colour" style="color: rgb(33, 33, 33);">浏览器发出的所有 HTTP 请求会首先路由到浏览器缓存，以确认是否缓存了可用于满足请求的有效响应。如果有匹配的响应，则从缓存中读取响应，这样就避免了网络延迟和传送产生的流量费用。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><strong>不过，如果您想更新或废弃缓存的响应，该怎么办？</strong></span><span class="colour" style="color: rgb(33, 33, 33);">例如，假定您已告诉访问者将某个 CSS 样式表缓存长达 24 小时 (max-age=86400)，但设计人员刚刚提交了一个您希望所有用户都能使用的更新。您该如何通知拥有现在“已过时”的 CSS 缓存副本的所有访问者更新其缓存？在不更改资源网址的情况下，您做不到。</span><br><span class="colour" style="color: rgb(33, 33, 33);">浏览器缓存响应后，缓存的版本将一直使用到过期（由 max-age 或 expires 决定），或一直使用到由于某种其他原因从缓存中删除，例如用户清除了浏览器缓存。因此，构建网页时，不同的用户可能最终使用的是文件的不同版本；刚获取了资源的用户将使用新版本的响应，而缓存了早期（但仍有效）副本的用户将使用旧版本的响应。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><strong>所以，如何才能鱼和熊掌兼得：客户端缓存和快速更新？</strong></span><span class="colour" style="color: rgb(33, 33, 33);">您可以在资源内容发生变化时更改它的网址，强制用户下载新响应。通常情况下，可以通过在文件名中嵌入文件的指纹或版本号来实现 - 例如 style.</span><span class="colour" style="color: rgb(33, 33, 33);"><strong>x234dff</strong></span><span class="colour" style="color: rgb(33, 33, 33);">.css。</span><br><span class="colour" style="color: rgb(33, 33, 33);"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmAAAAEgCAMAAAAkBT8TAAACYVBMVEVMaXEAAAAAAAAAAAAAAAAAAAANDxAAAAA0OT1ocXodICIICQoAAADP4vO8zdwkJyoFBQYAAADF1+gxNTkEBAUAAADJ2+tESlACAwMAAADM3u9UXGMBAQEAAABlbnYAAAB1gIkDBAQAAACMmKQAAAAAAACbqbYJCgoAAAAAAACltMETFBbC1OR7h5FHTlQGBwgTFRe1xtUaHB5yfIVeZ28KCwtBR0xLUlgNDg+ru8lhanI3PEGPnKi/0OBOVVsqLjKSoKyCjpiVo68nKy4gIyZYYGeZp7Ovv82IlaCFkZwtMjW4ydhbY2sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACywtEAAAAAAAAAAAAAAAAAAAAAAAAAAACerbp/ipUAAAAAAAAAAAAAAAAAAAAAAACisL4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRWV8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXGRsQEhNueYIAAAAAAABrdX6ot8V4g40BAQFAPTOAeWYkIh0BAQH/8szn27k4NS3z58JQTED77slsZlaMhXCso4oFBQTDuZwNDArv47+/tZnf1LLj17b36sbLwaKQiXPHvZ/TyKl8dmOgmIAgHhoICAYEBANYVEbXzKw0MSoYFxNcV0rb0K8MCwqIgW0QDw0UExAcGxZIRDp4cmCUjHbr37w8OTC4r5Owp40oJiB0bl1EQTaknINUUENoY1OEfWpwalq0q5CYkHrPxKYsKiNkX1BMSD0wLiZgW02on4a8spaclH2q2fxSAAAAmHRSTlMAV39nDP/RFP///+AY////7Sj///A8///2S////Fv/b///j/+jBP/+swj//v///////////////////////////////////////////yAcXyxA37+f/4P76/O753v//3NjNKdHEP9T20/X96/ji8fDqzhDz++3/yQwm9OXy4dr////k3f////M////4P////////////z/+OixSFUAACokSURBVHgB7NJTgmRRGITBv5HTt5Bt27Ztlva/m7FeC2f4xRoi8H8BAAAAAABAW3srdXQG8JM2tda7rgB+aFeWa6G8CsX4CQiWcwt196i3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" alt></span><br><span class="colour" style="color: rgb(33, 33, 33);">因为能够定义每个资源的缓存策略，所以您可以定义“缓存层次结构”，这样不但可以控制每个响应的缓存时间，还可以控制访问者看到新版本的速度。为了进行说明，我们一起分析一下上面的示例：</span></p><ul><li><span class="colour" style="color: rgb(33, 33, 33);">HTML 被标记为“no-cache”，这意味着浏览器在每次请求时都始终会重新验证文档，并在内容变化时获取最新版本。此外，在 HTML 标记内，您在 CSS 和 JavaScript 资产的网址中嵌入指纹：如果这些文件的内容发生变化，网页的 HTML 也会随之改变，并会下载 HTML 响应的新副本。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">允许浏览器和中间缓存（例如 CDN）缓存 CSS，并将 CSS 设置为 1 年后到期。请注意，您可以放心地使用 1 年的“远期过期”，因为您在文件名中嵌入了文件的指纹：CSS 更新时网址也会随之变化。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">JavaScript 同样设置为 1 年后到期，但标记为 private，这或许是因为它包含的某些用户私人数据是 CDN 不应缓存的。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);">图像缓存时不包含版本或唯一指纹，并设置为 1 天后到期。</span></li></ul><p><span class="colour" style="color: rgb(33, 33, 33);">您可以组合使用 ETag、Cache-Control 和唯一网址来实现一举多得：较长的过期时间、控制可以缓存响应的位置以及随需更新。</span></p><h2 id="缓存检查清单"><a href="#缓存检查清单" class="headerlink" title="缓存检查清单"></a><span class="colour" style="color: rgb(33, 33, 33);">缓存检查清单</span></h2><p><span class="colour" style="color: rgb(33, 33, 33);">不存在什么最佳缓存策略。您需要根据通信模式、提供的数据类型以及应用特定的数据更新要求，为每个资源定义和配置合适的设置，以及整体的“缓存层次结构”。</span><br><span class="colour" style="color: rgb(33, 33, 33);">在制定缓存策略时，您需要牢记下面这些技巧和方法：</span></p><ul><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>使用一致的网址</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：如果您在不同的网址上提供相同的内容，将会多次获取和存储这些内容。提示：请注意，</span><a href="http://www.w3.org/TR/WD-html40-970708/htmlweb.html" target="_blank" rel="noopener">网址区分大小写</a><span class="colour" style="color: rgb(33, 33, 33);">。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>确保服务器提供验证令牌 (ETag)</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：有了验证令牌，当服务器上的资源未发生变化时，就不需要传送相同的字节。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>确定中间缓存可以缓存哪些资源</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：对所有用户的响应完全相同的资源非常适合由 CDN 以及其他中间缓存进行缓存。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>为每个资源确定最佳缓存周期</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：不同的资源可能有不同的更新要求。为每个资源审核并确定合适的 max-age。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>确定最适合您的网站的缓存层次结构</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：您可以通过为 HTML 文档组合使用包含内容指纹的资源网址和短时间或 no-cache 周期，来控制客户端获取更新的速度。</span></li><li><span class="colour" style="color: rgb(33, 33, 33);"><strong>最大限度减少搅动</strong></span><span class="colour" style="color: rgb(33, 33, 33);">：某些资源的更新比其他资源频繁。如果资源的特定部分（例如 JavaScript 函数或 CSS 样式集）会经常更新，可以考虑将其代码作为单独的文件提供。这样一来，每次获取更新时，其余内容（例如变化不是很频繁的内容库代码）可以从缓存获取，从而最大限度减少下载的内容大小。</span></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;span class=&quot;colour&quot; style=&quot;color: rgb(33, 33, 33);&quot;&gt;通过网络获取内容既速度缓慢又开销巨大。较大的响应需要在客户端与服务器之间进行多次往返通信，这会延迟浏览器获得和处理内容的时间，还会增加访问者的流量费用。因此，缓存并重复利用之前获取的资源的能力成为性能优化的一个关键方面。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;colour&quot; style=&quot;color: rgb(33, 33, 33);&quot;&gt;好在每个浏览器都自带了 HTTP 缓存实现功能。您只需要确保每个服务器响应都提供正确的 HTTP 标头指令，以指示浏览器何时可以缓存响应以及可以缓存多久。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;colour&quot; style=&quot;color: rgb(33, 33, 33);&quot;&gt;注：如果您在应用中使用 Webview 来获取和显示网页内容，可能需要提供额外的配置标志，以确保 HTTP 缓存得到启用、其大小根据用例进行了合理设置并且缓存将持久保存。务必查看平台文档并确认您的设置！&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;colour&quot; style=&quot;color: rgb(33, 33, 33);&quot;&gt;&lt;img src=&quot;data:image/png;base64,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&quot; alt&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;colour&quot; style=&quot;color: rgb(33, 33, 33);&quot;&gt;当服务器返回响应时，还会发出一组 HTTP 标头，用于描述响应的内容类型、长度、缓存指令、验证令牌等。例如，在上图的交互中，服务器返回一个 1024 字节的响应，指示客户端将其缓存最多 120 秒，并提供一个验证令牌（“x234dff”），可在响应过期后用来检查资源是否被修改。&lt;/span&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="http" scheme="https://zayfen.com/categories/http/"/>
    
    
      <category term="http" scheme="https://zayfen.com/tags/http/"/>
    
      <category term="cache" scheme="https://zayfen.com/tags/cache/"/>
    
  </entry>
  
  <entry>
    <title>布隆过滤（Bloom Filter）</title>
    <link href="https://zayfen.com/2019/11/18/bbc765cf2f120d4208792bc259324906/"/>
    <id>https://zayfen.com/2019/11/18/bbc765cf2f120d4208792bc259324906/</id>
    <published>2019-11-18T09:44:34.735Z</published>
    <updated>2019-11-18T11:53:00.226Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Bloom-Filter"><a href="#Bloom-Filter" class="headerlink" title="Bloom Filter"></a>Bloom Filter</h1><h1 id="1-什么是布隆过滤？"><a href="#1-什么是布隆过滤？" class="headerlink" title="1. 什么是布隆过滤？"></a>1. 什么是布隆过滤？</h1><p>布隆过滤是应用于大数据中检测一个数据是否在一个集合中的搜索过滤算法。</p><h1 id="2-应用场景"><a href="#2-应用场景" class="headerlink" title="2. 应用场景"></a>2. 应用场景</h1><p>比如如何在成千上万的网址中快速地识别出恶意的网址，在成千上万的邮件中快速识别出恶意的邮件等</p><h1 id="3-算法简单描述"><a href="#3-算法简单描述" class="headerlink" title="3. 算法简单描述"></a>3. 算法简单描述</h1><p>布隆过滤是在一个bitmap中预先通过k个hash函数插入一些目标数据标记，表示为下图：<br>假设这里的bitmap(所有的位都初始化为0)是有10个bits，有3个hash 函数，有一个目标数据“cat”，那么将cat映射标记到bitmap就是通过3个hash函数分别计算cat的hash值，将hash值转换成bitmap的索引，并将对应索引位置的bit置为1，至此，我们就标记了一个目标数据，目前cat就是我们要过滤的数据，当在很多的数据中要识别出“cat”的时候，就可以通过建立好的这个bitmap来识别了。</p><a id="more"></a><p><img src="http://cdncontribute.geeksforgeeks.org/wp-content/uploads/cat-300x109.png" alt="cat"></p><p>比如，现在有3个数据来了，分别是 “dog”，“cat”，“pig”，我们需要从中识别出“cat”，怎么样识别呢？<br>“dog” =&gt; 映射到 bitmap[1], bitmap[2], bitmap[3], 发现都不是1，则‘dog‘就不是目标数据<br>“cat” =&gt; 映射到 bitmap[1], bitmap[3], bitmap[7],发现所有的都是1， 则 ‘cat’就是目标数据<br>“pig” =&gt; 映射到 bitmap[8], bitmap[9], bitmap[10]，发现都不是1， 则‘pig’就不是目标数据<br>这样通过重新计算hash来和bitmap中的对比就能过滤掉一些目标数据了<br>但是这里其实还有一个问题，存在一个不同的目标,比如“bird”，这个通过hash函数计算出来的结果可能在bitmap中都为1, 这种情况是无法避免的，我们称之为“误判”，这种识别错误的概率和目标数据，bitmap大小和hash函数的数据是相关联的</p><h1 id="4-算法推导"><a href="#4-算法推导" class="headerlink" title="4. 算法推导"></a>4. 算法推导</h1><p>布隆过滤的原理大概了解了，但是这里有个问题是，如何确定bitmap的大小以及hash function的多少，<br>我们可以通过指定一个错误概率的大小和初始的目标数据来确定 bitmap的大小和hash function 的数量</p><p>假设有 <script type="math/tex">K</script>个hash函数，<script type="math/tex">M</script> bits的bitmap， <script type="math/tex">N</script>个初始数据, 对于bitmap中的一个特定点，<script type="math/tex">K</script>个hash函数映射到此点的·概率相等，即一个点被函数命中的概率为：</p><script type="math/tex; mode=display">p_1=\frac{1}{M}</script><p>则一个点不被命中的概率为：</p><script type="math/tex; mode=display">p_2=1-\frac{1}{M}</script><p>则<script type="math/tex">K</script>个函数都不命中的概率为：</p><script type="math/tex; mode=display">p_3=\left(1-\frac{1}{M}\right)^K</script><p>假设已经存在了<script type="math/tex">N</script>个数据，那么一个特定的点在N个数据下都没有被命中的概率为：</p><script type="math/tex; mode=display">p_4=\left(1-\frac{1}{M}\right)^{KN}</script><p>那么这个点命中的概率为：</p><script type="math/tex; mode=display">p_5=1-\left(1-\frac{1}{M}\right)^{KN}</script><p>现在来判断一个不再初始数据集合中的数据被命中的概率，即，满足<script type="math/tex">K</script>个hash函数计算的结果都被命中，这种情况的概率为：</p><script type="math/tex; mode=display">p_6=\left(1-\left(1-\frac{1}{M}\right)^{KN}\right)^K</script><p>因为目标数据命中的概率为1，所以当<script type="math/tex">p_6</script>越小的时候，也就表示别的数据被命中的概率越低。<br>根据 <script type="math/tex">1-\frac{1}{m}\approx\ell^{-\frac{1}{m}}</script>可以将<script type="math/tex">p_6</script>简化为：<script type="math/tex">\ell^{-\frac{KN}{M}}</script></p><script type="math/tex; mode=display">p_6\approx\left(1-\ell^{-\frac{KN}{M}}\right)^K</script><p>因为<script type="math/tex">K</script>为正数，取其值为<script type="math/tex">\frac{M}{N}\ln2</script>， 则</p><script type="math/tex; mode=display">p_6\approx\left(1-\ell^{-\frac{\left(\frac{M}{N}\ln2\right)N}{M}}\right)^{\frac{M}{N}\ln2}</script><script type="math/tex; mode=display">\ln{p_6}\approx{\frac{M}{N}\ln2}\times\ln\left(1-\ell^{-\frac{\left(\frac{M}{N}\ln2\right)N}{M}}\right)</script><script type="math/tex; mode=display">\ln{p_6}\approx{\frac{M}{N}\ln2}\times\ln\left(1-\ell^{-\ln2}\right)</script><script type="math/tex; mode=display">\ln{p_6}\approx{\frac{M}{N}\ln2}\times\ln\left(1-\frac{1}{\ell^{\ln2}}\right)</script><script type="math/tex; mode=display">\ln{p_6}\approx\frac{M}{N}\ln2\times\ln\frac{1}{2}</script><script type="math/tex; mode=display">\ln{p_6}\approx\frac{M}{N}\ln2\times{\left(-\ln2\right)}</script><script type="math/tex; mode=display">\ln{p_6}\approx{-\frac{M}{N}{\left(\ln2\right)}^2}</script><p>所以最终</p><script type="math/tex; mode=display">M = -\frac{\ln{p_6} \times N}{ \left(\ln2\right)^2 }</script><p>所以当我们希望误判命中的概率是  0.001,  初始化插入了 10000 条数据， 那么<script type="math/tex">M</script> 就等于 </p><pre><code>Math.log(0.001)*10000 / Math.pow(Math.log(2), 2) * -1 // output: 143775.87566051158</code></pre><p>那么 <script type="math/tex">K</script>就等于</p><pre><code>143776 / 10000 * Math.log(2) // output: 9.965... 也就是需要10个hash函数</code></pre><h1 id="5-代码实现"><a href="#5-代码实现" class="headerlink" title="5. 代码实现"></a>5. 代码实现</h1><p><a href="https://github.com/zhangyunfeng/BloomFilter/tree/master/src" target="_blank" rel="noopener">https://github.com/zhangyunfeng/BloomFilter/tree/master/src</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Bloom-Filter&quot;&gt;&lt;a href=&quot;#Bloom-Filter&quot; class=&quot;headerlink&quot; title=&quot;Bloom Filter&quot;&gt;&lt;/a&gt;Bloom Filter&lt;/h1&gt;&lt;h1 id=&quot;1-什么是布隆过滤？&quot;&gt;&lt;a href=&quot;#1-什么是布隆过滤？&quot; class=&quot;headerlink&quot; title=&quot;1. 什么是布隆过滤？&quot;&gt;&lt;/a&gt;1. 什么是布隆过滤？&lt;/h1&gt;&lt;p&gt;布隆过滤是应用于大数据中检测一个数据是否在一个集合中的搜索过滤算法。&lt;/p&gt;&lt;h1 id=&quot;2-应用场景&quot;&gt;&lt;a href=&quot;#2-应用场景&quot; class=&quot;headerlink&quot; title=&quot;2. 应用场景&quot;&gt;&lt;/a&gt;2. 应用场景&lt;/h1&gt;&lt;p&gt;比如如何在成千上万的网址中快速地识别出恶意的网址，在成千上万的邮件中快速识别出恶意的邮件等&lt;/p&gt;&lt;h1 id=&quot;3-算法简单描述&quot;&gt;&lt;a href=&quot;#3-算法简单描述&quot; class=&quot;headerlink&quot; title=&quot;3. 算法简单描述&quot;&gt;&lt;/a&gt;3. 算法简单描述&lt;/h1&gt;&lt;p&gt;布隆过滤是在一个bitmap中预先通过k个hash函数插入一些目标数据标记，表示为下图：&lt;br&gt;假设这里的bitmap(所有的位都初始化为0)是有10个bits，有3个hash 函数，有一个目标数据“cat”，那么将cat映射标记到bitmap就是通过3个hash函数分别计算cat的hash值，将hash值转换成bitmap的索引，并将对应索引位置的bit置为1，至此，我们就标记了一个目标数据，目前cat就是我们要过滤的数据，当在很多的数据中要识别出“cat”的时候，就可以通过建立好的这个bitmap来识别了。&lt;/p&gt;
    
    </summary>
    
      <category term="algorithm" scheme="https://zayfen.com/categories/algorithm/"/>
    
    
      <category term="algorithm" scheme="https://zayfen.com/tags/algorithm/"/>
    
      <category term="bloom filter" scheme="https://zayfen.com/tags/bloom-filter/"/>
    
  </entry>
  
  <entry>
    <title>常见WEB安全防御</title>
    <link href="https://zayfen.com/2019/11/18/f97ef80c3fff95b1c02a4a937d666b66/"/>
    <id>https://zayfen.com/2019/11/18/f97ef80c3fff95b1c02a4a937d666b66/</id>
    <published>2019-11-18T09:28:42.604Z</published>
    <updated>2019-11-18T11:30:15.990Z</updated>
    
    <content type="html"><![CDATA[<h1 id="WEB安全"><a href="#WEB安全" class="headerlink" title="WEB安全"></a>WEB安全</h1><p>[TOC]</p><h2 id="一、漏洞分类"><a href="#一、漏洞分类" class="headerlink" title="一、漏洞分类"></a>一、漏洞分类</h2><ul><li>XSS漏洞</li><li>CSRF漏洞</li><li>SSRF漏洞</li><li>SQL漏洞</li></ul><p>二、各种漏洞介绍<br><strong>XSS漏洞</strong></p><ol><li><p>什么是XSS漏洞<br>XSS漏洞全称跨站脚本攻击，英文全称 Cross-site Scripting, 为了不和css名字重复，所以取名XSS. XSS漏洞主要是能够利用代码的漏洞，通过一些技巧在浏览器端执行非法的javascript脚本，这些非法的javascript脚本拥有当前登录用户的权限，可以执行一些非法操作，从而给用户或者企业带来损失。</p></li><li><p>XSS漏洞的种类</p></li></ol><a id="more"></a><ul><li>DOM型XSS</li></ul><p>这个是最常见的一个XSS漏洞了，在在浏览器端操作DOM时产生。比如，在一个input中输入一个字符串，并将字符串显示在页面中，如果没有对字符串做校验就可能会产生DOM型xss漏洞。<br>例子：</p><p><a href="https://pastebin.com/C1inFY9n" target="_blank" rel="noopener">https://pastebin.com/C1inFY9n</a></p><p><a href="https://pastebin.com/C1inFY9n" target="_blank" rel="noopener">https://pastebin.com/C1inFY9n</a></p><ul><li>反射型XSS</li></ul><p>反射型XSS是发送到服务端的数据没有做参数的校验和过滤，只是简单地把用户输入的数据”反射”给浏览器,导致在浏览器中渲染处理参数时引入了js脚本。反射型XSS也叫做”非持久型XSS” (Non-persistent XSS)</p><ul><li>存储型XSS .</li></ul><p>存储型XSS会把用户输入的数据”存储”在服务端, 这种XSS具有很强的稳定性.最常见的一种情况就是,在博客中写一段包含有恶意javascript代码发表, 这段恶意的代码就会随着博客内容存储到数据库中,如何人访问这篇博客都会受到攻击</p><hr><ol><li>XSS漏洞的危害<br>a. 窃取cookie,登录别人账户<br>攻击者可以构造一个链接,当被攻击者点击了这个链接之后,会触发xss漏洞,就会执行一个js脚本,该js脚本会携带cookie信息通过img标签或者script标签等可以跨域访问的标签将信息发送给攻击者.<br>b. 构造GET和POST请求,删除或者篡改受害者信息<br>比如有个删除文章的接口: <a href="http://blog.abc.com/delete?id=post_idxxx" target="_blank" rel="noopener">http://blog.abc.com/delete?id=post_idxxx</a>, 当攻击者知道被攻击者的一篇文章的id的时候,就可以通过xss payload来请求删除文章的接口, 修改被攻击者信息同理.<br>c. XSS钓鱼<br>xss的攻击过程都是需要在浏览器中通过javascript自动执行的.如果在攻击的过程中存在和用户交互的情况就比较麻烦了,比如需要输入旧密码或者输入图片上的验证码,虽然比较麻烦,但是我们还是可以实施xss攻击的,比如把显示验证码的图片地址发送给攻击者,或者制作一个长得一模一样的输入帐号密码的界面欺骗被攻击者.这些攻击方法就是xss钓鱼.<br>d. 识别用户的浏览器,利用浏览器的漏洞对系统进行攻击<br>浏览器有漏洞,虽然浏览器会通过更新来解决这些漏洞,但是不能保证所有的人都更新到最新版本,当检测到有漏洞的浏览器版本,就可以通过浏览器漏洞对系统进行攻击.<br>e. 识别用户安装的软件执行挂马攻击<br>在IE中可以通过判断 ActieX空间的classid是否存在来判断用户是否安装了软件.黑客通过判断被攻击者安装的软件,选择对应的浏览器漏洞,最终达到植入木马的目的.<br>比如在IE中通过如下的代码就可以判断用户是否安装了迅雷:<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> ActiveXObject(<span class="string">'XunLeiBHO.ThunderIEHelper'</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="comment">// 异常, 没有安装此软件</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (obj) &#123;</span><br><span class="line">  <span class="comment">// 安装了迅雷</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>另外,可以通过flash的一个 system.capabilities对象来找出电脑的硬件信息,还可以通过判断特定的DOM来判断浏览器安装了哪些插件.</p><p>通过xss攻击还可以知道被攻击者访问了哪些页面(通过 :visited 伪元素判断), 还可以在jre环境中通过调用Java Applete的接口获取客户端的本地ip地址.</p><ol><li>XSS的防御<br>a. HttpOnly<br>通过在cookie中设置HttpOnly这个属性,可以阻止javascript访问cookie内容.<br>b. 输入检查<br>对输入的值进行字符类型,字符长度检查,比如手机号码,不能出现字母,而且长度为11, 对一些特殊字符,比如尖括号进行转义编码,或者一些特殊的字符串进行过滤,比如 <code>&lt;script&gt;, javascript:</code>.<br>c. 输出检查<br>执行安全的编码函数, htmlEncode, javascriptEncode.<br>在html中输出变量$var,使用 htmlEncode对$var进行编码.<br>在html中的onclick等事件中输出,使用javascript对$var编码<br>在javascript中输出$var, 使用 javascript对$var编码<br>在css中,禁止变量输出,即不要在style中使用$var变量<br>在地址中输出,使用urlEncode<br>d. 处理富文本<br>通过htmlparser解析文本,过滤掉危险标签 <code>&lt;iframe&gt;, &lt;script&gt;, &lt;base&gt;, &lt;form&gt;</code>等, 在富文本中可选择的标签使用白名单,避免使用黑名单,即指定富文本中只能使用哪几种标签.<br>e.编写代码时,注意这些地方;<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">document.write();</span><br><span class="line">document.writeln();</span><br><span class="line">xxx.innerHTML();</span><br><span class="line">xxx.outerHTML();</span><br><span class="line">innerHTML.replace();</span><br><span class="line">document.attachEvent();</span><br><span class="line">window.attachEvent();</span><br><span class="line">document.location.replace();</span><br><span class="line">document.location.assign();</span><br><span class="line"></span><br><span class="line">// 页面中所有的input输入框</span><br><span class="line">window.location(href, hash, ...)</span><br><span class="line">window.name</span><br><span class="line">document.referrer</span><br><span class="line">document.cookie</span><br><span class="line">localstorage</span><br><span class="line">XMLHttpRequest // 主要是返回的数据</span><br></pre></td></tr></table></figure></li></ol><p><strong>CSRF漏洞</strong><br>CSRF漏洞,全称Cross Site Request Forgery<a href="跨站请求伪造">/ˈfɔːdʒəri/ 伪造</a>, 比如存在一个转账的接口:<br><a href="http://bank.com/transform/?money=xxx&amp;to=zzz" target="_blank" rel="noopener">http://bank.com/transform/?money=xxx&amp;to=zzz</a>;  攻击者可以伪造一个链接 <a href="http://bank.com/transform/?money=1&amp;o=lisi" target="_blank" rel="noopener">http://bank.com/transform/?money=1&amp;o=lisi</a>, 诱惑用户点击这个链接,那么用户在神不知鬼不觉之下就转移了1元钱给李四, 这个伪造的链接可以放到一个网页的img标签中, 当用户点击这个网页的时候,钱就被神不知鬼不觉的转走了. 为什么伪造的请求会请求通过呢?因为用户的浏览器成功的发送了Cookie给服务器.</p><p>防御方法: 增加一个随机的token, 每次转账的时候都要带上这个随机额token, 同事后台需要校验token的正确性,比如 <a href="http://bank.com/transform/?money=xxx&amp;to=zzz&amp;token=abcUx23Flzd" target="_blank" rel="noopener">http://bank.com/transform/?money=xxx&amp;to=zzz&amp;token=abcUx23Flzd</a>, 这样攻击者不知道token的情况下,构造的链接就会无效.</p><p><strong>点击劫持(ClickJacking)</strong><br>点击劫持是一种视觉上的欺骗手段.攻击者使用一个透明的iframe,覆盖在一个网页上,然后诱使用户在网页上进行操作,通过调整iframe的位置,当用户点击一个按钮的时候,其实是点击在iframe上的一个功能按钮上.</p><p>点击劫持有:</p><ul><li>Flash点击劫持</li><li>图片覆盖攻击</li><li>拖拽劫持与数据窃取</li><li>触屏劫持</li></ul><p>防御:<br>禁止跨域的iframe来防御, 使用HTTP头  X-Frame-Options, X-Frame-Options有3个选项, DENY, SAMEORIGIN, ALLOW-FROM origin</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;WEB安全&quot;&gt;&lt;a href=&quot;#WEB安全&quot; class=&quot;headerlink&quot; title=&quot;WEB安全&quot;&gt;&lt;/a&gt;WEB安全&lt;/h1&gt;&lt;p&gt;[TOC]&lt;/p&gt;&lt;h2 id=&quot;一、漏洞分类&quot;&gt;&lt;a href=&quot;#一、漏洞分类&quot; class=&quot;headerlink&quot; title=&quot;一、漏洞分类&quot;&gt;&lt;/a&gt;一、漏洞分类&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;XSS漏洞&lt;/li&gt;
&lt;li&gt;CSRF漏洞&lt;/li&gt;
&lt;li&gt;SSRF漏洞&lt;/li&gt;
&lt;li&gt;SQL漏洞&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;二、各种漏洞介绍&lt;br&gt;&lt;strong&gt;XSS漏洞&lt;/strong&gt;&lt;/p&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;什么是XSS漏洞&lt;br&gt;XSS漏洞全称跨站脚本攻击，英文全称 Cross-site Scripting, 为了不和css名字重复，所以取名XSS. XSS漏洞主要是能够利用代码的漏洞，通过一些技巧在浏览器端执行非法的javascript脚本，这些非法的javascript脚本拥有当前登录用户的权限，可以执行一些非法操作，从而给用户或者企业带来损失。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;XSS漏洞的种类&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="web" scheme="https://zayfen.com/categories/web/"/>
    
    
      <category term="web" scheme="https://zayfen.com/tags/web/"/>
    
      <category term="security" scheme="https://zayfen.com/tags/security/"/>
    
  </entry>
  
  <entry>
    <title>搜索算法</title>
    <link href="https://zayfen.com/2019/11/18/b7d273159f6becc31fc5174ea7582c5e/"/>
    <id>https://zayfen.com/2019/11/18/b7d273159f6becc31fc5174ea7582c5e/</id>
    <published>2019-11-18T08:33:55.543Z</published>
    <updated>2019-11-18T08:50:21.298Z</updated>
    
    <content type="html"><![CDATA[<h3 id="线性搜索"><a href="#线性搜索" class="headerlink" title="线性搜索"></a>线性搜索</h3><p>线性搜索也是最简单的搜索算法，简单来说，就是对一个数组或者顺序容器，进行从头到尾的遍历，一个一个的找到目标元素<br><img src="https://cdncontribute.geeksforgeeks.org/wp-content/uploads/Linear.png" alt="image"><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单的线性搜索算法实现</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">linear_search</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt;&amp; vec, <span class="keyword">const</span> T&amp; x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> index = <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; element : vec) &#123;</span><br><span class="line">    index++;</span><br><span class="line">    <span class="keyword">if</span>(element == x) &#123;</span><br><span class="line">      <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><a id="more"></a><p><strong>时间复杂度： O(N)</strong></p><hr><h3 id="二分查找（Binary-Search）"><a href="#二分查找（Binary-Search）" class="headerlink" title="二分查找（Binary Search）"></a>二分查找（Binary Search）</h3><p>二分查找，是给定一个有序的数组或者顺序容器，每次取容器的中间位置的元素和目标元素对比来缩短查找的范围。过程可以简单描述如下：<br><img src="https://www.geeksforgeeks.org/wp-content/uploads/gq/2014/01/binary-search1.png" alt="image"><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 二分查找</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">binary_search</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt;&amp; vec, <span class="keyword">const</span> <span class="keyword">int</span> low, <span class="keyword">const</span> <span class="keyword">int</span> high, <span class="keyword">const</span> T&amp; x)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"binary_search low "</span> &lt;&lt; low &lt;&lt; <span class="string">"  high "</span> &lt;&lt; high &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">if</span> (low &gt; high) &#123; <span class="comment">// 没有找到</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">int</span> middle = low + (high - low) / <span class="number">2</span>; <span class="comment">// 搜索区间缩短一半</span></span><br><span class="line">  <span class="keyword">if</span> (x == vec.at(middle)) &#123;</span><br><span class="line">    <span class="keyword">return</span> middle;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">int</span> low_ = vec.at(middle) &gt; x ? low : middle + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> high_ = vec.at(middle) &gt; x ? middle - <span class="number">1</span> : high;</span><br><span class="line">  <span class="keyword">return</span> binary_search(vec, low_, high_, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>时间复杂度： O(LogN)</strong></p><hr><h3 id="跳跃查找（Jump-Search）"><a href="#跳跃查找（Jump-Search）" class="headerlink" title="跳跃查找（Jump Search）"></a>跳跃查找（Jump Search）</h3><p>给定一个有序的顺序容器，容器宗有n个元素， 将元素分成m份，每份 n/m 个元素。然后我们按照每n/m个元素间隔去查找元素，找到要搜索的元素所在的区间[i, i+n/m), 然后在这个区间中<br>判断值<br><img src="https://res.cloudinary.com/zayfen/image/upload/v1574065062/img/jrebsdjju8ez4ggz3lrn.png" alt="image"></p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">jump_search</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt;&amp; vec, <span class="keyword">const</span> T&amp; x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (vec.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">int</span> stepWidth = <span class="built_in">std</span>::<span class="built_in">sqrt</span>(vec.size());</span><br><span class="line">  <span class="keyword">int</span> prevStepIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> stepIndex = <span class="built_in">std</span>::min(stepWidth, <span class="keyword">int</span>(vec.size())) - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">while</span> (vec.at(stepIndex) &lt; x) &#123;</span><br><span class="line">    prevStepIndex = stepIndex;</span><br><span class="line">    stepIndex = <span class="built_in">std</span>::min(stepWidth + stepIndex, <span class="keyword">int</span>(vec.size() - <span class="number">1</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (prevStepIndex == stepIndex) &#123; <span class="comment">// 到达尾部，没有找到x元素</span></span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ignore all elements less than x</span></span><br><span class="line">  <span class="keyword">while</span> (vec.at(prevStepIndex) &lt; x) &#123;</span><br><span class="line">    prevStepIndex++;</span><br><span class="line">    <span class="keyword">if</span> (prevStepIndex &gt;= vec.size()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// if element found</span></span><br><span class="line">  <span class="keyword">if</span> (vec.at(prevStepIndex) == x) &#123;</span><br><span class="line">    <span class="keyword">return</span> prevStepIndex;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>算法分析<br>寻找要查找的元素所在的区间，最大需要为 m - 1次比较，再区间段中最大需要n/m次比较 ，所以时间复杂度是 O((m-1) + n/m),<br>要使 (m-1) + n/m 最小，需要 m = sqrt(n),所有， 时间复杂度是 O(sqrt(n) - 1 + n/sqrt(n)) 也就是  O(sqrt(n))</li></ul><p>让 n/m+m-1 = 0,</p><p>jump search 的时间复杂度，是介于线性查找和二分查找之间的，所以jump search 的性能没有比二分查找要好，但是jump search 有一个好处，就是他只需要回退一次，加入我们要查找一个最小的元素，jump search 只需要查找一个，而二分查找需要查满，这种情况下，jump search 是优于 二分查找的。<br><img src="https://res.cloudinary.com/zayfen/image/upload/v1574065247/img/oo88hrbld592stbd6lq2.png" alt="image"></p><hr><h3 id="差值搜索-（Interpolation-Search）"><a href="#差值搜索-（Interpolation-Search）" class="headerlink" title="差值搜索 （Interpolation Search）"></a>差值搜索 （Interpolation Search）</h3><p>差值搜索是对二分搜索的优化，二分搜索永远都是从搜索区间的中间位置开始切分，而差值搜索会从选择从要搜索的元素最接近的位置开始切分，这样就有利于尽快的找到要搜索的元素</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">position</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt;&amp; vec, <span class="keyword">const</span> T&amp; x, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> low + (high - low) * ((x - vec.at(low)) / (vec.at(high) - vec.at(low)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">interpolation_search</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;T&gt;&amp; vec, <span class="keyword">const</span> T&amp; x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> high = vec.size() - <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> (low &lt;= high &amp;&amp; x &gt;= vec.at(low) &amp;&amp; x &lt;= vec.at(high)) &#123;</span><br><span class="line">    <span class="keyword">int</span> pos = position(vec, x, low, high);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"position is %d \n"</span>, pos);</span><br><span class="line">    <span class="keyword">if</span> (vec.at(pos) == x) &#123;</span><br><span class="line">      <span class="keyword">return</span> pos;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (vec.at(pos) &lt; x) &#123;</span><br><span class="line">      low = pos + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    high = pos - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>算法分析：<br>如果顺序容器中的元素是均匀分布的，那么就是时间复杂度就是 O(log log n)), 最坏的情况是 O(n)<div class="pdf" target="/Assets/p550-perl.pdf" height></div></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;线性搜索&quot;&gt;&lt;a href=&quot;#线性搜索&quot; class=&quot;headerlink&quot; title=&quot;线性搜索&quot;&gt;&lt;/a&gt;线性搜索&lt;/h3&gt;&lt;p&gt;线性搜索也是最简单的搜索算法，简单来说，就是对一个数组或者顺序容器，进行从头到尾的遍历，一个一个的找到目标元素&lt;br&gt;&lt;img src=&quot;https://cdncontribute.geeksforgeeks.org/wp-content/uploads/Linear.png&quot; alt=&quot;image&quot;&gt;&lt;br&gt;&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 简单的线性搜索算法实现&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;keyword&quot;&gt;typename&lt;/span&gt; T&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;linear_search&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;std&lt;/span&gt;::&lt;span class=&quot;built_in&quot;&gt;vector&lt;/span&gt;&amp;lt;T&amp;gt;&amp;amp; vec, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; T&amp;amp; x)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; index = &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;auto&lt;/span&gt;&amp;amp; element : vec) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    index++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(element == x) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; index;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="algorithm" scheme="https://zayfen.com/categories/algorithm/"/>
    
    
      <category term="algorithm" scheme="https://zayfen.com/tags/algorithm/"/>
    
      <category term="search" scheme="https://zayfen.com/tags/search/"/>
    
  </entry>
  
  <entry>
    <title>Chrome调试微信web页面</title>
    <link href="https://zayfen.com/2019/11/17/302d853864089ff3288321c00a69a043/"/>
    <id>https://zayfen.com/2019/11/17/302d853864089ff3288321c00a69a043/</id>
    <published>2019-11-18T05:00:00.000Z</published>
    <updated>2019-11-18T07:36:29.580Z</updated>
    
    <content type="html"><![CDATA[<h2 id="如何用Chrome调试微信web页面"><a href="#如何用Chrome调试微信web页面" class="headerlink" title="如何用Chrome调试微信web页面"></a>如何用Chrome调试微信web页面</h2><blockquote><p>微信调试有官方的微信开发者工具，这个工具很方便，但是有一个不方便就是调试公众号页面的时候，需要公众号给你授予开发者权限，<br>但是有的时候，你仅仅只是想调试页面的样式和一些dom结构，这个时候直接用chrome调试微信web页面就显得特别方便了。</p></blockquote><h3 id="步骤（此处仅仅在android手机上做了测试）"><a href="#步骤（此处仅仅在android手机上做了测试）" class="headerlink" title="步骤（此处仅仅在android手机上做了测试）"></a>步骤（此处仅仅在android手机上做了测试）</h3><h4 id="1-打开android手机的开发者模式-和-usb调试"><a href="#1-打开android手机的开发者模式-和-usb调试" class="headerlink" title="1. 打开android手机的开发者模式 和 usb调试"></a>1. 打开android手机的开发者模式 和 usb调试</h4><blockquote><p>每个手机打开方式都不一样，请自行搜索解决方案</p></blockquote><a id="more"></a><h4 id="2-打开chrome的-Remote-Devices"><a href="#2-打开chrome的-Remote-Devices" class="headerlink" title="2. 打开chrome的 Remote Devices"></a>2. 打开chrome的 <code>Remote Devices</code></h4><p><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456083/img/xfln0smfyyrmta2cgfbg.png" alt></p><h4 id="3-手机连接电脑"><a href="#3-手机连接电脑" class="headerlink" title="3. 手机连接电脑"></a>3. 手机连接电脑</h4><blockquote><p>手机连接电脑的时候，会弹出一个usb授权提示弹窗，点解<code>确定</code></p></blockquote><h4 id="4-在Chrome上的-Remote-Devices上查看链接的手机情况"><a href="#4-在Chrome上的-Remote-Devices上查看链接的手机情况" class="headerlink" title="4. 在Chrome上的 Remote Devices上查看链接的手机情况"></a>4. 在Chrome上的 <code>Remote Devices</code>上查看链接的手机情况</h4><p><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456090/img/sebny1fdphicnkfmisgx.png" alt></p><h4 id="5-调试手机上的页面"><a href="#5-调试手机上的页面" class="headerlink" title="5. 调试手机上的页面"></a>5. 调试手机上的页面</h4><blockquote><p>点击要调试的页面的右边的 <code>Inspect</code>按钮，就可以打开进行调试了。 <strong>但是这个时候我们发现仅仅只能看到浏览器的页面，没有看到微信的web页面</strong></p></blockquote><h4 id="6-手机微信打开-http-debugx5-qq-com-并勾选-打开TBS内核Inspector调试功能"><a href="#6-手机微信打开-http-debugx5-qq-com-并勾选-打开TBS内核Inspector调试功能" class="headerlink" title="6. 手机微信打开 http://debugx5.qq.com, 并勾选 打开TBS内核Inspector调试功能"></a>6. 手机微信打开 <a href="http://debugx5.qq.com" target="_blank" rel="noopener">http://debugx5.qq.com</a>, 并勾选 <code>打开TBS内核Inspector调试功能</code></h4><p><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456094/img/xa7exyod0yyavarj1w7f.jpg" alt></p><blockquote><p>勾选后会提示重启，点击确定就行</p></blockquote><h4 id="7-微信上打开要调试的web-页面，就可以在chrome中看到了"><a href="#7-微信上打开要调试的web-页面，就可以在chrome中看到了" class="headerlink" title="7. 微信上打开要调试的web 页面，就可以在chrome中看到了"></a>7. 微信上打开要调试的web 页面，就可以在chrome中看到了</h4><p><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456098/img/nz3ismpqljduymsinjq0.jpg" alt><br><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456100/img/fo5afmbyo4uvj7qgrgop.png" alt></p><h4 id="8-点击chrome中-inspect按钮及可以开始调试了"><a href="#8-点击chrome中-inspect按钮及可以开始调试了" class="headerlink" title="8. 点击chrome中 inspect按钮及可以开始调试了"></a>8. 点击chrome中 <code>inspect</code>按钮及可以开始调试了</h4><p><img src="https://res.cloudinary.com/zayfen/image/upload/v1566456105/img/irjrryrjdx9eq0rqg7pb.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;如何用Chrome调试微信web页面&quot;&gt;&lt;a href=&quot;#如何用Chrome调试微信web页面&quot; class=&quot;headerlink&quot; title=&quot;如何用Chrome调试微信web页面&quot;&gt;&lt;/a&gt;如何用Chrome调试微信web页面&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;微信调试有官方的微信开发者工具，这个工具很方便，但是有一个不方便就是调试公众号页面的时候，需要公众号给你授予开发者权限，&lt;br&gt;但是有的时候，你仅仅只是想调试页面的样式和一些dom结构，这个时候直接用chrome调试微信web页面就显得特别方便了。&lt;/p&gt;
&lt;/blockquote&gt;&lt;h3 id=&quot;步骤（此处仅仅在android手机上做了测试）&quot;&gt;&lt;a href=&quot;#步骤（此处仅仅在android手机上做了测试）&quot; class=&quot;headerlink&quot; title=&quot;步骤（此处仅仅在android手机上做了测试）&quot;&gt;&lt;/a&gt;步骤（此处仅仅在android手机上做了测试）&lt;/h3&gt;&lt;h4 id=&quot;1-打开android手机的开发者模式-和-usb调试&quot;&gt;&lt;a href=&quot;#1-打开android手机的开发者模式-和-usb调试&quot; class=&quot;headerlink&quot; title=&quot;1. 打开android手机的开发者模式 和 usb调试&quot;&gt;&lt;/a&gt;1. 打开android手机的开发者模式 和 usb调试&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;每个手机打开方式都不一样，请自行搜索解决方案&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="web" scheme="https://zayfen.com/categories/web/"/>
    
    
      <category term="wechat" scheme="https://zayfen.com/tags/wechat/"/>
    
      <category term="debugger" scheme="https://zayfen.com/tags/debugger/"/>
    
      <category term="web" scheme="https://zayfen.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>解决JPEG图片显示方向不正确的问题</title>
    <link href="https://zayfen.com/2019/11/17/d3c4828a43569ce3ca593dc66b1eb668/"/>
    <id>https://zayfen.com/2019/11/17/d3c4828a43569ce3ca593dc66b1eb668/</id>
    <published>2019-11-18T05:00:00.000Z</published>
    <updated>2019-11-18T07:34:38.739Z</updated>
    
    <content type="html"><![CDATA[<p>背景： 一些jpeg图片，在pc中用图片查看器打开是正的，但是放到浏览器中，就横着了；有一个上传人脸的需求，用手机拍完人脸照片，在应用中显示所拍的照片总是横着的。今天，我们就来解决这个问题。</p><h3 id="为什么JEPG图片会横着显示？"><a href="#为什么JEPG图片会横着显示？" class="headerlink" title="为什么JEPG图片会横着显示？"></a>为什么JEPG图片会横着显示？</h3><p>首先，我们看一个github上的一个关于此问题的issue：<br><a href="https://github.com/GoogleChromeLabs/squoosh/issues/299" target="_blank" rel="noopener">https://github.com/GoogleChromeLabs/squoosh/issues/299</a><br>这个问题讨论的是chrome显示jpeg图片，旋转了90度的问题。<br>为什么会旋转呢？因为JEPG图片的EXIF data中有一个控制旋转的属性<strong>Orientation</strong>，但是有一些应用程序显示图片的时候会忽略这个属性，就导致图片在一些应用程序中显示出来和原本的方向不一致。</p><a id="more"></a><p>这里有一张JEPG图片的EXIF数据（可以看到第一个属性就是 Orientation）：<br><img src="https://res.cloudinary.com/zayfen/image/upload/v1570695926/img/ibvnab25sqxnz4ahapu6.png" alt="JPEG图片的EXIF数据"></p><h3 id="让图片永远都正着显示"><a href="#让图片永远都正着显示" class="headerlink" title="让图片永远都正着显示"></a>让图片永远都正着显示</h3><p>因为 JPEG的 <strong>Orientation</strong> 属性被忽略了，那么当检测到图片Orientation的值表示需要旋转的时候，我们就主动将JPEEG图片旋转，并且改正或者去掉新图片的<strong>Orientation</strong> 字段。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用exif-js 这个库去获取jpeg图片的EXIF元数据 (https://github.com/exif-js/exif-js)</span></span><br><span class="line"><span class="comment">// 旋转图片的工具,(旋转之后的图片的EXIF data被移除)</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">import</span> * <span class="keyword">as</span> EXIF <span class="keyword">from</span> <span class="string">'exif-js'</span>  <span class="comment">// npm install exif-js</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">// &lt;img id="show-image" /&gt;,用来显示旋转后的图像</span></span><br><span class="line"> <span class="keyword">var</span> image = <span class="built_in">document</span>.getElementById(<span class="string">'show-image'</span>) </span><br><span class="line"> </span><br><span class="line"> <span class="comment">// &lt;input id="image-input" type="file" name="imag" /&gt;</span></span><br><span class="line"> <span class="keyword">var</span> imageInput = <span class="built_in">document</span>.getElementById(<span class="string">'image-input'</span>) </span><br><span class="line"> imageInput.onchange = <span class="function"><span class="keyword">function</span> (<span class="params">evt</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"onchange: ..."</span>)</span><br><span class="line">   <span class="keyword">let</span> file = evt.target.files[<span class="number">0</span>]</span><br><span class="line">   rotateImage(file).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">     image.src = data.base64</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fileToBinary</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 读取图片数据</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader()</span><br><span class="line">        reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.result <span class="keyword">instanceof</span> <span class="built_in">ArrayBuffer</span>) &#123;</span><br><span class="line">            <span class="comment">// resolve(new Uint8Array(reader.result))</span></span><br><span class="line">            resolve(<span class="keyword">this</span>.result)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        reader.readAsArrayBuffer(file)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将Blob 对象以fileName文件名下载下来</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">downloadBlob</span> (<span class="params">blob, fileName</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> url = <span class="built_in">window</span>.URL.createObjectURL(blob)</span><br><span class="line">      <span class="keyword">const</span> link = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">      link.href = url</span><br><span class="line">      link.setAttribute(<span class="string">'download'</span>, fileName)</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">      link.click()</span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(link) <span class="comment">// 下载完成移除元素</span></span><br><span class="line">      <span class="built_in">window</span>.URL.revokeObjectURL(url) <span class="comment">// 释放掉blob对象      </span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rotateImage</span>(<span class="params">file</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fileToBinary(file).then(<span class="function">(<span class="params">binaryFile</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> meta = EXIF.readFromBinaryFile(binaryFile)</span><br><span class="line">          <span class="keyword">let</span> orientation = meta.Orientation</span><br><span class="line">          <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line">          <span class="keyword">let</span> rotationMap = &#123; <span class="number">3</span>: <span class="number">180</span>, <span class="number">6</span>: <span class="number">90</span>, <span class="number">8</span>: <span class="number">270</span> &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 不需要旋转</span></span><br><span class="line">          <span class="keyword">if</span> (meta === <span class="literal">false</span> || !rotationMap[orientation]) &#123;</span><br><span class="line">            formData.append(<span class="string">'file'</span>, file, <span class="string">'face.jpeg'</span>)</span><br><span class="line">            <span class="keyword">return</span> resolve(&#123; <span class="attr">base64</span>: <span class="string">''</span>, <span class="attr">formData</span>: formData, <span class="attr">rotated</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">let</span> rotationDegree = <span class="number">0</span></span><br><span class="line">          <span class="keyword">let</span> targetWidth = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">          rotationDegree = rotationMap[orientation] || <span class="number">0</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">let</span> image = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">          image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>)</span><br><span class="line">            <span class="keyword">let</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> rate = <span class="built_in">Math</span>.min(targetWidth / image.width, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">let</span> imageWidth = image.width * rate</span><br><span class="line">            <span class="keyword">let</span> imageHeight = image.height * rate</span><br><span class="line">            <span class="keyword">if</span> (rotationDegree === <span class="number">90</span> || rotationDegree === <span class="number">270</span>) &#123;</span><br><span class="line">              canvas.width = imageHeight</span><br><span class="line">              canvas.height = imageWidth</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              canvas.width = image.width</span><br><span class="line">              canvas.height = image.height</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ctx.fillStyle = <span class="string">'rgba(255, 255, 255, 0)'</span></span><br><span class="line"></span><br><span class="line">            ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height)</span><br><span class="line"></span><br><span class="line">            ctx.save()</span><br><span class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height)</span><br><span class="line">            ctx.translate(canvas.width / <span class="number">2</span>, canvas.height / <span class="number">2</span>)</span><br><span class="line">            ctx.rotate(rotationDegree * <span class="built_in">Math</span>.PI / <span class="number">180</span>)</span><br><span class="line">            <span class="keyword">if</span> (rotationDegree === <span class="number">90</span> || rotationDegree === <span class="number">270</span>) &#123;</span><br><span class="line">              ctx.drawImage(image, -canvas.height / <span class="number">2</span>, -canvas.width / <span class="number">2</span> + (canvas.width - imageHeight) / <span class="number">2</span>, imageWidth, imageHeight)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              ctx.drawImage(image, -canvas.width / <span class="number">2</span>, -canvas.height / <span class="number">2</span>, imageWidth, imageHeight)</span><br><span class="line">            &#125;</span><br><span class="line">            ctx.restore()</span><br><span class="line"></span><br><span class="line">            canvas.toBlob(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span><br><span class="line">              formData.append(<span class="string">'file'</span>, blob, <span class="string">'face.jpeg'</span>)</span><br><span class="line">              <span class="keyword">let</span> base64 = canvas.toDataURL(<span class="string">'image/jpeg'</span>, <span class="number">0.8</span>)</span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">'rotated image  blob: '</span>, blob)</span><br><span class="line">              <span class="comment">// downloadBlob(blob, '123.jpg')  // 下载图片</span></span><br><span class="line">              resolve(&#123; <span class="attr">base64</span>: base64, <span class="attr">rotated</span>: <span class="literal">true</span>, <span class="attr">formData</span>: formData &#125;)</span><br><span class="line">            &#125;, <span class="string">'image/jpeg'</span>, <span class="number">0.8</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          image.src = URL.createObjectURL(file)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>例子效果：</strong><br><img src="https://res.cloudinary.com/zayfen/image/upload/v1571232577/img/y8zxcjibljhul5nr1cab.png" alt="旋转图片的例子"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;背景： 一些jpeg图片，在pc中用图片查看器打开是正的，但是放到浏览器中，就横着了；有一个上传人脸的需求，用手机拍完人脸照片，在应用中显示所拍的照片总是横着的。今天，我们就来解决这个问题。&lt;/p&gt;&lt;h3 id=&quot;为什么JEPG图片会横着显示？&quot;&gt;&lt;a href=&quot;#为什么JEPG图片会横着显示？&quot; class=&quot;headerlink&quot; title=&quot;为什么JEPG图片会横着显示？&quot;&gt;&lt;/a&gt;为什么JEPG图片会横着显示？&lt;/h3&gt;&lt;p&gt;首先，我们看一个github上的一个关于此问题的issue：&lt;br&gt;&lt;a href=&quot;https://github.com/GoogleChromeLabs/squoosh/issues/299&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/GoogleChromeLabs/squoosh/issues/299&lt;/a&gt;&lt;br&gt;这个问题讨论的是chrome显示jpeg图片，旋转了90度的问题。&lt;br&gt;为什么会旋转呢？因为JEPG图片的EXIF data中有一个控制旋转的属性&lt;strong&gt;Orientation&lt;/strong&gt;，但是有一些应用程序显示图片的时候会忽略这个属性，就导致图片在一些应用程序中显示出来和原本的方向不一致。&lt;/p&gt;
    
    </summary>
    
      <category term="web" scheme="https://zayfen.com/categories/web/"/>
    
    
      <category term="jpg" scheme="https://zayfen.com/tags/jpg/"/>
    
      <category term="image" scheme="https://zayfen.com/tags/image/"/>
    
  </entry>
  
  <entry>
    <title>Git 常用操作</title>
    <link href="https://zayfen.com/2019/11/13/a43fd1c509d10e4d08fc1f789d58cb23/"/>
    <id>https://zayfen.com/2019/11/13/a43fd1c509d10e4d08fc1f789d58cb23/</id>
    <published>2019-11-14T05:00:00.000Z</published>
    <updated>2019-11-15T06:54:20.351Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://res.cloudinary.com/zayfen/image/upload/v1568171685/img/l8yeyxvtfw6kplg1ci67.png" alt="git flow"></p><h3 id="漂亮打印git-log"><a href="#漂亮打印git-log" class="headerlink" title="漂亮打印git log"></a>漂亮打印git log</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --graph --pretty=format:<span class="string">'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset'</span> --abbrev-commit --date=relative</span><br></pre></td></tr></table></figure><h3 id="添加修改或者新文件到待commit队列"><a href="#添加修改或者新文件到待commit队列" class="headerlink" title="添加修改或者新文件到待commit队列"></a>添加修改或者新文件到待commit队列</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">### add 的文件是支持正则匹配的</span></span><br><span class="line">git add &lt;file(s)&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### add all changes to commiter queue</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看某个commit的修改内容</span></span><br><span class="line">git show &lt;commit-id&gt;</span><br><span class="line">git diff &lt;commit-id&gt;^!</span><br><span class="line"><span class="comment">##### e.g. git show d34ff657f5   git diff d34ff657f5^!</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line"><span class="comment">### 提交已添加的文件到本地仓库并创建一个新的版本</span></span><br><span class="line">```sh</span><br><span class="line">git commit -m <span class="string">"commit message"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### also can combine git add &amp; git commit in one command</span></span><br><span class="line">git commit -m <span class="string">"commit message"</span> -a</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="推送到远程仓库"><a href="#推送到远程仓库" class="headerlink" title="推送到远程仓库"></a>推送到远程仓库</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">### origin 是仓库名（默认就是origin），branch_name 是分支名</span></span><br><span class="line">git push origin &lt;branch-name&gt;</span><br></pre></td></tr></table></figure><h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><h3 id="创建一个仓库"><a href="#创建一个仓库" class="headerlink" title="创建一个仓库"></a>创建一个仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### from existed repo </span></span><br><span class="line">git <span class="built_in">clone</span> &lt;repo-url&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### create a new local repo</span></span><br><span class="line">git init [&lt;<span class="built_in">local</span>-directory&gt;]</span><br></pre></td></tr></table></figure><h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><h3 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 查看本地分支</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看本地和远端的分支</span></span><br><span class="line">git branch -va</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看本地分支和远程分支的对应关系</span></span><br><span class="line">git remote show &lt;repo-name&gt; <span class="comment">## git remote show origin</span></span><br></pre></td></tr></table></figure><h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 仅仅创建一个新分支在本地</span></span><br><span class="line">git checkout &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### 创建一个分支，并且将工作区切换到新创建的分支</span></span><br><span class="line">git checkout -b &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### 拉取远程分支到本地，并切换分支</span></span><br><span class="line">git checkout -b &lt;<span class="built_in">local</span>-branch-name&gt; &lt;repo-name&gt;/&lt;remote-branch-name&gt;</span><br><span class="line"><span class="comment">#### e.g.: git checkout -b test origin/test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 把远程分支拉取到本地，不切换分支 (--tranck 选项现在是默认的了)</span></span><br><span class="line">git branch &lt;<span class="built_in">local</span>-branch-name&gt; &lt;repo-name&gt;/&lt;remote-branch-name&gt; [--track]</span><br><span class="line"><span class="comment">#### e.g.: git branch test origin/test</span></span><br></pre></td></tr></table></figure><h3 id="将本地分支推送到远程仓库"><a href="#将本地分支推送到远程仓库" class="headerlink" title="将本地分支推送到远程仓库"></a>将本地分支推送到远程仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 远程分支不存在的情况</span></span><br><span class="line"><span class="comment">### remote-name: 通常是 origin； local-branch-name: 本地分支名； remote-branch-name: 要创建的远程分支名</span></span><br><span class="line"> git push &lt;remote-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt;:&lt;remote-branch-name&gt;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">## 远程分支存在的情况（但是没有关联）</span></span><br><span class="line"> <span class="comment">### 首先关联本地分支和远程分支</span></span><br><span class="line"> git push -u &lt;remote-name&gt; &lt;branch-name&gt;</span><br><span class="line"> <span class="comment">#### or</span></span><br><span class="line"> git branch --<span class="built_in">set</span>-upstream-to=&lt;remote-name&gt;/&lt;remote-branch&gt; &lt;<span class="built_in">local</span>-branch&gt;</span><br></pre></td></tr></table></figure><h3 id="更新分支"><a href="#更新分支" class="headerlink" title="更新分支"></a>更新分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 跟新本地分支</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment">### 更新远程分支信息</span></span><br><span class="line">git remote update</span><br><span class="line"></span><br><span class="line"><span class="comment">### 使用远程的代码强制更新本地的代码 （强制本地代码和线上的一致）v1.0</span></span><br><span class="line">git checkout .</span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment">### 使用远程的分支代码强制更新本地的代码（强制本地代码和线上的一致）v2.0</span></span><br><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin/master</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure><h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h2><h3 id="创建tag"><a href="#创建tag" class="headerlink" title="创建tag"></a>创建tag</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag -a &lt;tag-name&gt; -m &lt;tag-message&gt;</span><br></pre></td></tr></table></figure><h3 id="删除tag"><a href="#删除tag" class="headerlink" title="删除tag"></a>删除tag</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 删除本地tag</span></span><br><span class="line">git tag -d &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### 删除远端tag</span></span><br><span class="line">git push --delete &lt;repo-name&gt; &lt;tag-name&gt;</span><br><span class="line">or </span><br><span class="line">git push &lt;repo-name&gt; :refs/tags/&lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### e.g.: git push --delete origin tag-r0</span></span><br><span class="line"><span class="comment">### e.g.: git push origin :refs/tags/tag-r0</span></span><br></pre></td></tr></table></figure><h3 id="查看tag"><a href="#查看tag" class="headerlink" title="查看tag"></a>查看tag</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 查看所有的tag</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看单个tag</span></span><br><span class="line">git tag -l &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查看一个tag的具体信息</span></span><br><span class="line">git show &lt;tag-name&gt;</span><br></pre></td></tr></table></figure><h3 id="推送tag到远程"><a href="#推送tag到远程" class="headerlink" title="推送tag到远程"></a>推送tag到远程</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">## push single tag</span></span><br><span class="line">git push &lt;remote-name&gt; &lt;tag-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">## push all tags (not recommended)</span></span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure><h3 id="撤销工作目录所有的更改（包括新创建的文件）"><a href="#撤销工作目录所有的更改（包括新创建的文件）" class="headerlink" title="撤销工作目录所有的更改（包括新创建的文件）"></a>撤销工作目录所有的更改（包括新创建的文件）</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">git reset --hard <span class="comment"># removes staged and working directory changes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## !! be very careful with these !!</span></span><br><span class="line"><span class="comment">## you may end up deleting what you don't want to</span></span><br><span class="line"><span class="comment">## read comments and manual.</span></span><br><span class="line">git clean -f -d <span class="comment"># remove untracked</span></span><br><span class="line">git clean -f -x -d <span class="comment"># CAUTION: as above but removes ignored files like config.</span></span><br><span class="line">git clean -fxd :/ <span class="comment"># CAUTION: as above, but cleans untracked and ignored files through the entire repo (without :/, the operation affects only the current directory)</span></span><br></pre></td></tr></table></figure><h3 id="git仓库存储账号密码，不用每次都输入账号密码（针对https协议的仓库地址）"><a href="#git仓库存储账号密码，不用每次都输入账号密码（针对https协议的仓库地址）" class="headerlink" title="git仓库存储账号密码，不用每次都输入账号密码（针对https协议的仓库地址）"></a>git仓库存储账号密码，不用每次都输入账号密码（针对https协议的仓库地址）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">$ git config credential.helper store</span><br><span class="line">$ git push https://github.com/owner/repo.git</span><br><span class="line"></span><br><span class="line">Username <span class="keyword">for</span> <span class="string">'https://github.com'</span>: &lt;USERNAME&gt;</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'https://USERNAME@github.com'</span>: &lt;PASSWORD&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行完上面的命令之后，以后所有的push都不再需要提交代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 如果想让此功能有个时间限制，可以这样</span></span><br><span class="line"></span><br><span class="line">git config --global credential.helper <span class="string">'cache --timeout 7200'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 7200秒后失效，push需要重新输入账号密码</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/zayfen/image/upload/v1568171685/img/l8yeyxvtfw6kplg1ci67.png&quot; alt=&quot;git flow&quot;&gt;&lt;/p&gt;&lt;h3 id=&quot;漂亮打印git-log&quot;&gt;&lt;a href=&quot;#漂亮打印git-log&quot; class=&quot;headerlink&quot; title=&quot;漂亮打印git log&quot;&gt;&lt;/a&gt;漂亮打印git log&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; --graph --pretty=format:&lt;span class=&quot;string&quot;&gt;&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset&#39;&lt;/span&gt; --abbrev-commit --date=relative&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&quot;添加修改或者新文件到待commit队列&quot;&gt;&lt;a href=&quot;#添加修改或者新文件到待commit队列&quot; class=&quot;headerlink&quot; title=&quot;添加修改或者新文件到待commit队列&quot;&gt;&lt;/a&gt;添加修改或者新文件到待commit队列&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### add 的文件是支持正则匹配的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add &amp;lt;file(s)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### add all changes to commiter queue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### 查看某个commit的修改内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git show &amp;lt;commit-id&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git diff &amp;lt;commit-id&amp;gt;^!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;##### e.g. git show d34ff657f5   git diff d34ff657f5^!&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;``` &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### 提交已添加的文件到本地仓库并创建一个新的版本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit -m &lt;span class=&quot;string&quot;&gt;&quot;commit message&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### also can combine git add &amp;amp; git commit in one command&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit -m &lt;span class=&quot;string&quot;&gt;&quot;commit message&quot;&lt;/span&gt; -a&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="git" scheme="https://zayfen.com/categories/git/"/>
    
    
      <category term="git" scheme="https://zayfen.com/tags/git/"/>
    
  </entry>
  
</feed>
